<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Application EU AI Act - Inventaire et conformit√© scoring cr√©dit high-risk. Outil RegTech pour banques et institutions financi√®res.">
    <title>EU AI Act Compliance | Inventaire High-Risk Homieux Media</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #000887;
            --accent: #ED51C2;
            --background: #FFFFFF;
            --text: #1a1a1a;
            --text-light: #666666;
            --border: #e5e5e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light-bg: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Epilogue', sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        header {
            padding: 24px 0;
            border-bottom: 1px solid var(--border);
            background: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            height: 40px;
            width: auto;
        }
        
        .discovery-btn {
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        
        .discovery-btn:hover {
            background: var(--accent);
            transform: translateY(-1px);
        }
        
        main {
            padding: 40px 0;
            min-height: calc(100vh - 200px);
        }
        
        .progress-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
            gap: 8px;
        }
        
        .progress-step {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s;
        }
        
        .progress-step.active {
            background: var(--primary);
            color: white;
        }
        
        .progress-step.completed {
            background: var(--success);
            color: white;
        }
        
        .progress-line {
            width: 40px;
            height: 2px;
            background: var(--border);
            transition: all 0.3s;
        }
        
        .progress-line.completed {
            background: var(--success);
        }
        
        .step-container {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }
        
        .step-container.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .step-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .step-header h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .step-header p {
            color: var(--text-light);
            font-size: 16px;
        }
        
        .step-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.02);
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group:last-child {
            margin-bottom: 0;
        }
        
        label {
            display: block;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            color: var(--text);
        }
        
        .label-hint {
            font-weight: 400;
            color: var(--text-light);
            font-size: 13px;
            margin-top: 4px;
        }
        
        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 14px;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            font-family: 'Epilogue', sans-serif;
            font-size: 15px;
            transition: all 0.2s;
            background: white;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 8, 135, 0.05);
        }
        
        input.error,
        select.error,
        textarea.error {
            border-color: var(--danger);
        }
        
        .error-message {
            color: var(--danger);
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }
        
        .error-message.visible {
            display: block;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 12px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checkbox-item:hover {
            border-color: var(--primary);
            background: rgba(0, 8, 135, 0.02);
        }
        
        .checkbox-item input[type="checkbox"] {
            margin-top: 2px;
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
        }
        
        .checkbox-item label {
            font-weight: 400;
            font-size: 14px;
            margin: 0;
            cursor: pointer;
            flex: 1;
            line-height: 1.5;
        }
        
        .checkbox-item strong {
            color: var(--primary);
            display: block;
            margin-bottom: 2px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border-radius: 8px;
            font-family: 'Epilogue', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            width: 100%;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: var(--accent);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 8, 135, 0.15);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 1.5px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 32px;
        }
        
        .btn-group .btn {
            flex: 1;
        }
        
        .summary-card {
            background: var(--light-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .summary-title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-light);
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .summary-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 32px 0;
        }
        
        .stat-card {
            text-align: center;
            padding: 24px;
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 12px;
            transition: all 0.2s;
        }
        
        .stat-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 13px;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-high-risk {
            background: #fee2e2;
            color: var(--danger);
        }
        
        .badge-compliant {
            background: #d1fae5;
            color: var(--success);
        }
        
        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .model-summary {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .model-summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .model-summary-name {
            font-weight: 600;
            color: var(--primary);
        }
        
        .model-summary-meta {
            font-size: 13px;
            color: var(--text-light);
        }
        
        .checklist-container {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-top: 24px;
        }
        
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .checklist-item:last-child {
            border-bottom: none;
        }
        
        .checklist-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
            margin-top: 2px;
            flex-shrink: 0;
        }
        
        .checklist-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .checklist-content p {
            font-size: 13px;
            color: var(--text-light);
            line-height: 1.5;
        }
        
        .alert {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            color: #92400e;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            font-size: 14px;
        }
        
        .alert strong {
            color: #78350f;
            display: block;
            margin-bottom: 4px;
        }
        
        .success-icon {
            width: 64px;
            height: 64px;
            background: var(--success);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 24px;
        }
        
        .final-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 32px;
        }
        
        @media (max-width: 640px) {
            .final-actions {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
        
        footer {
            background: var(--primary);
            color: white;
            padding: 48px 0 24px;
            margin-top: 80px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .footer-logo {
            height: 40px;
            opacity: 0.9;
        }
        
        .footer-links {
            display: flex;
            gap: 32px;
        }
        
        .footer-links a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 24px;
            text-align: center;
            color: rgba(255,255,255,0.6);
            font-size: 14px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="https://homieuxmedia.com" target="_blank" rel="noopener">
                    <!-- LOGO DANS LE MEME REPOSITORY -->
                    <img src="logo-homieux.png" alt="Homieux Media Logo" class="logo">
                </a>
                <a href="https://cal.com/homieux-media/discovery-call-gratuit-discutons-de-vos-defis" target="_blank" rel="noopener" class="discovery-btn">
                    Appel D√©couverte 15 min
                </a>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Indicateur de progression -->
            <div class="progress-indicator" id="progressIndicator">
                <div class="progress-step active" data-step="1">1</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="4">4</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="5">5</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="6">6</div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="7">7</div>
            </div>

            <!-- √âtape 1 : Informations entreprise -->
            <div class="step-container active" id="step1">
                <div class="step-header">
                    <span class="step-number">√âtape 1 sur 7</span>
                    <h1>Votre entreprise</h1>
                    <p>Commen√ßons par identifier votre organisation pour personnaliser votre rapport de conformit√©.</p>
                </div>
                
                <div class="form-card">
                    <div class="form-group">
                        <label for="companyName">Nom de l'entreprise *</label>
                        <input type="text" id="companyName" placeholder="Ex : Banque Centrale Europ√©enne" required>
                        <div class="error-message">Veuillez saisir le nom de votre entreprise</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="userPosition">Votre poste actuel *</label>
                        <input type="text" id="userPosition" placeholder="Ex : Directeur de la Conformit√©, Chief Risk Officer" required>
                        <div class="error-message">Veuillez saisir votre poste actuel</div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="nextStep(1)">
                        Continuer ‚Üí
                    </button>
                </div>
            </div>

            <!-- √âtape 2 : Ajouter un mod√®le -->
            <div class="step-container" id="step2">
                <div class="step-header">
                    <span class="step-number">√âtape 2 sur 7</span>
                    <h1>Ajouter un mod√®le d'IA</h1>
                    <p>Identifiez un syst√®me d'IA utilis√© pour le scoring ou l'√©valuation du cr√©dit.</p>
                </div>
                
                <div class="form-card">
                    <div class="form-group">
                        <label for="modelName">Nom du mod√®le ou du syst√®me *</label>
                        <input type="text" id="modelName" placeholder="Ex : Scoring Consommation V3, Moteur de d√©cision cr√©dit immobilier" required>
                        <div class="error-message">Veuillez saisir un nom pour ce mod√®le</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="modelType">Type de technologie *</label>
                        <select id="modelType" required>
                            <option value="">S√©lectionner le type...</option>
                            <option value="ml">Machine Learning (ML) supervis√©</option>
                            <option value="dl">Deep Learning / R√©seaux de neurones</option>
                            <option value="rules">Syst√®me bas√© sur des r√®gles m√©tier</option>
                            <option value="hybrid">Syst√®me hybride (r√®gles + ML)</option>
                            <option value="genai">IA G√©n√©rative (LLM) pour l'analyse de documents</option>
                        </select>
                        <div class="error-message">Veuillez s√©lectionner un type de technologie</div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê Retour</button>
                        <button class="btn btn-primary" onclick="nextStep(2)">Continuer ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- √âtape 3 : Usage principal -->
            <div class="step-container" id="step3">
                <div class="step-header">
                    <span class="step-number">√âtape 3 sur 7</span>
                    <h1>Usage principal</h1>
                    <p>D√©finissez l'objectif principal de ce syst√®me d'IA.</p>
                </div>
                
                <div class="form-card">
                    <div class="form-group">
                        <label for="modelUsage">Usage principal du syst√®me *</label>
                        <select id="modelUsage" required>
                            <option value="">S√©lectionner l'usage...</option>
                            <option value="credit_scoring">√âvaluation du risque cr√©dit (personnes physiques) - Annexe III 5(b)</option>
                            <option value="credit_scoring_moral">√âvaluation du risque cr√©dit (personnes morales)</option>
                            <option value="fraud_detection">D√©tection de fraude et pr√©vention</option>
                            <option value="pricing">Pricing / Tarification personnalis√©e</option>
                            <option value="collection">Recouvrement et gestion des impay√©s</option>
                            <option value="other">Autre usage li√© au cr√©dit</option>
                        </select>
                        <div class="label-hint">L'√©valuation du risque cr√©dit pour les particuliers est class√©e high-risk par l'Annexe III point 5(b) de l'EU AI Act.</div>
                        <div class="error-message">Veuillez s√©lectionner un usage principal</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="modelDate">Date de mise en production ou de d√©ploiement pr√©vu *</label>
                        <input type="date" id="modelDate" required>
                        <div class="error-message">Veuillez s√©lectionner une date</div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="prevStep(3)">‚Üê Retour</button>
                        <button class="btn btn-primary" onclick="nextStep(3)">Continuer ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- √âtape 4 : Caract√©ristiques du syst√®me -->
            <div class="step-container" id="step4">
                <div class="step-header">
                    <span class="step-number">√âtape 4 sur 7</span>
                    <h1>Caract√©ristiques du syst√®me</h1>
                    <p>Cochez les √©l√©ments qui s'appliquent √† ce mod√®le. Ces crit√®res d√©terminent le niveau de risque.</p>
                </div>
                
                <div class="form-card">
                    <div class="form-group">
                        <label>Caract√©ristiques techniques et op√©rationnelles</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item" onclick="toggleCheckbox('automatedDecision')">
                                <input type="checkbox" id="automatedDecision" value="true">
                                <label for="automatedDecision">
                                    <strong>D√©cision enti√®rement automatis√©e</strong>
                                    Le syst√®me prend des d√©cisions sans intervention humaine significative (profiling automatis√©)
                                </label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox('personalData')">
                                <input type="checkbox" id="personalData" value="true">
                                <label for="personalData">
                                    <strong>Donn√©es personnelles sensibles</strong>
                                    Traitement de donn√©es sensibles (revenus, sant√©, biom√©trie, donn√©es de g√©olocalisation pr√©cises)
                                </label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox('profiling')">
                                <input type="checkbox" id="profiling" value="true">
                                <label for="profiling">
                                    <strong>Profiling syst√©matique</strong>
                                    √âvaluation automatis√©e des aspects personnels (performance √©conomique, comportement, pr√©f√©rences)
                                </label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox('thirdParty')">
                                <input type="checkbox" id="thirdParty" value="true">
                                <label for="thirdParty">
                                    <strong>Fournisseur tiers (SaaS/Cloud)</strong>
                                    Solution h√©berg√©e ou fournie par un prestataire externe (ex : FICO, SAS, cloud AWS/Azure)
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="prevStep(4)">‚Üê Retour</button>
                        <button class="btn btn-primary" onclick="nextStep(4)">Continuer ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- √âtape 5 : Notes et contexte -->
            <div class="step-container" id="step5">
                <div class="step-header">
                    <span class="step-number">√âtape 5 sur 7</span>
                    <h1>Contexte additionnel</h1>
                    <p>Ajoutez des informations compl√©mentaires pour enrichir l'analyse.</p>
                </div>
                
                <div class="form-card">
                    <div class="form-group">
                        <label for="modelNotes">Notes / Contexte sp√©cifique</label>
                        <textarea id="modelNotes" placeholder="D√©crivez : le fournisseur technique, la documentation existante, les processus de gouvernance actuels, les points de vigilance identifi√©s..."></textarea>
                        <div class="label-hint">Ces informations appara√Ætront dans votre rapport PDF.</div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="prevStep(5)">‚Üê Retour</button>
                        <button class="btn btn-primary" onclick="validateAndAddModel()">Valider ce mod√®le</button>
                    </div>
                </div>
            </div>

            <!-- √âtape 6 : R√©sum√© et statistiques -->
            <div class="step-container" id="step6">
                <div class="step-header">
                    <span class="step-number">√âtape 6 sur 7</span>
                    <h1>R√©sum√© de l'inventaire</h1>
                    <p>Voici la classification de vos mod√®les et leur niveau de conformit√© estim√©.</p>
                </div>
                
                <div id="summaryContent">
                    <!-- Contenu dynamique inject√© ici -->
                </div>
                
                <div class="btn-group" style="margin-top: 32px;">
                    <button class="btn btn-secondary" onclick="addAnotherModel()">+ Ajouter un autre mod√®le</button>
                    <button class="btn btn-primary" onclick="nextStep(6)">Voir la checklist ‚Üí</button>
                </div>
            </div>

            <!-- √âtape 7 : Export et finalisation -->
            <div class="step-container" id="step7">
                <div class="step-header">
                    <div class="success-icon">‚úì</div>
                    <h1>Votre analyse est pr√™te</h1>
                    <p>T√©l√©chargez votre rapport de conformit√© et votre checklist EU AI Act.</p>
                </div>
                
                <div class="alert">
                    <strong>Obligation l√©gale :</strong> Date limite de conformit√© pour les syst√®mes high-risk (Annexe III) : <strong>2 ao√ªt 2026</strong>. Les manquements peuvent entra√Æner des sanctions jusqu'√† 15 millions d'euros ou 3% du CA mondial.
                </div>
                
                <div class="form-card">
                    <h3 style="margin-bottom: 20px; color: var(--primary);">Ce qui est d√©j√† r√©solu :</h3>
                    <ul style="margin-bottom: 24px; padding-left: 20px; line-height: 2; color: var(--text);">
                        <li>Inventaire initial des syst√®mes d'IA √©tabli</li>
                        <li>Classification high-risk vs conforme effectu√©e</li>
                        <li>Identification des fournisseurs tiers et d√©pendances</li>
                    </ul>
                    
                    <h3 style="margin-bottom: 20px; color: var(--primary);">Prochaines √©tapes recommand√©es :</h3>
                    <ul style="margin-bottom: 32px; padding-left: 20px; line-height: 2; color: var(--text);">
                        <li>√âtablir la documentation technique (Article 11)</li>
                        <li>Mettre en place le syst√®me de Risk Management (Article 9)</li>
                        <li>Conduire une √©valuation d'impact sur les droits fondamentaux (FRIA)</li>
                        <li>Mettre en place la supervision humaine effective (Article 14)</li>
                        <li>Proc√©der √† l'√©valuation de conformit√© (Article 20)</li>
                    </ul>
                    
                    <div class="final-actions">
                        <button class="btn btn-primary" onclick="generateFullPDF()">
                            üìÑ Rapport Complet PDF
                        </button>
                        <button class="btn btn-success" onclick="generateChecklistPDF()">
                            ‚úÖ Checklist Articles 9-20
                        </button>
                    </div>
                    
                    <div style="margin-top: 24px; text-align: center;">
                        <button class="btn btn-secondary" onclick="submitToTracking()" style="width: auto; padding: 12px 24px; font-size: 14px;">
                            Envoyer les r√©sultats √† l'√©quipe conformit√©
                        </button>
                        <p style="font-size: 12px; color: var(--text-light); margin-top: 8px;">
                            Les donn√©es seront envoy√©es vers Google Forms et sauvegard√©es dans une feuille Excel
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <a href="https://homieuxmedia.com" target="_blank" rel="noopener">
                    <!-- LOGO DANS LE MEME REPOSITORY -->
                    <img src="logo-homieux.png" alt="Homieux Media" class="footer-logo">
                </a>
                <div class="footer-links">
                    <a href="https://www.homieuxmedia.com/politique-de-confidentialite" target="_blank" rel="noopener">Politique de confidentialit√©</a>
                    <a href="https://www.homieuxmedia.com/conditions-dutilisation" target="_blank" rel="noopener">Conditions d'utilisation</a>
                    <a href="https://cal.com/homieux-media/discovery-call-gratuit-discutons-de-vos-defis" target="_blank" rel="noopener">Appel D√©couverte 15 min</a>
                </div>
            </div>
            <div class="footer-bottom">
                ¬© 2026 Homieux Media. Outil de conformit√© EU AI Act pour institutions financi√®res. Aucune donn√©e n'est stock√©e sur nos serveurs ‚Äî traitement local uniquement.
            </div>
        </div>
    </footer>

    <script>
        // ==========================================
        // CONFIGURATION GOOGLE FORMS - √Ä MODIFIER
        // ==========================================
        const GOOGLE_FORM_CONFIG = {
            // Remplacez par l'ID de votre Google Form (voir tutoriel √©tape 3)
            formId: '1FAIpQLSdhGVFA9QnbSAeE289lK9AS_DpstWeN5S8jn-Azmq8qYWc4ew',
            
            // Entry IDs des questions (voir tutoriel √©tape 4)
            entryIds: {
                company: 'entry.1244441122',      // ID pour "Nom de l'entreprise"
                position: 'entry.917762188',     // ID pour "Poste"
                timestamp: 'entry.1763668413',    // ID pour "Date et heure"
                totalModels: 'entry.7443289',  // ID pour "Nombre de mod√®les"
                highRiskCount: 'entry.50838455', // ID pour "Nombre high-risk"
                jsonData: 'entry.2096049887'      // ID pour "Donn√©es compl√®tes (JSON)"
            }
        };

        // Stockage local des donn√©es
        let currentStep = 1;
        let userData = {
            company: '',
            position: ''
        };
        let models = JSON.parse(localStorage.getItem('euaiact_models') || '[]');
        let currentModel = {};

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressUI();
            
            // Restaurer les donn√©es si existantes
            const savedUser = localStorage.getItem('euaiact_user');
            if (savedUser) {
                userData = JSON.parse(savedUser);
                document.getElementById('companyName').value = userData.company || '';
                document.getElementById('userPosition').value = userData.position || '';
            }
        });

        // Navigation entre √©tapes
        function nextStep(step) {
            if (!validateStep(step)) return;
            
            if (step === 1) {
                // Sauvegarder infos entreprise
                userData.company = document.getElementById('companyName').value.trim();
                userData.position = document.getElementById('userPosition').value.trim();
                localStorage.setItem('euaiact_user', JSON.stringify(userData));
            }
            
            document.getElementById(`step${step}`).classList.remove('active');
            document.getElementById(`step${step + 1}`).classList.add('active');
            currentStep = step + 1;
            updateProgressUI();
            
            // Si √©tape 6, g√©n√©rer le r√©sum√©
            if (currentStep === 6) {
                renderSummary();
            }
        }

        function prevStep(step) {
            document.getElementById(`step${step}`).classList.remove('active');
            document.getElementById(`step${step - 1}`).classList.add('active');
            currentStep = step - 1;
            updateProgressUI();
        }

        function validateStep(step) {
            let valid = true;
            const stepEl = document.getElementById(`step${step}`);
            const requiredFields = stepEl.querySelectorAll('[required]');
            
            requiredFields.forEach(field => {
                const errorMsg = field.parentNode.querySelector('.error-message');
                if (!field.value.trim()) {
                    field.classList.add('error');
                    if (errorMsg) errorMsg.classList.add('visible');
                    valid = false;
                } else {
                    field.classList.remove('error');
                    if (errorMsg) errorMsg.classList.remove('visible');
                }
            });
            
            return valid;
        }

        function updateProgressUI() {
            const steps = document.querySelectorAll('.progress-step');
            const lines = document.querySelectorAll('.progress-line');
            
            steps.forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                    step.innerHTML = '‚úì';
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                    step.innerHTML = stepNum;
                } else {
                    step.innerHTML = stepNum;
                }
            });
            
            lines.forEach((line, index) => {
                line.classList.remove('completed');
                if (index < currentStep - 1) {
                    line.classList.add('completed');
                }
            });
        }

        function toggleCheckbox(id) {
            const checkbox = document.getElementById(id);
            checkbox.checked = !checkbox.checked;
        }

        function validateAndAddModel() {
            // Collecter les donn√©es du mod√®le
            currentModel = {
                id: Date.now(),
                name: document.getElementById('modelName').value.trim(),
                type: document.getElementById('modelType').value,
                typeLabel: document.getElementById('modelType').options[document.getElementById('modelType').selectedIndex].text,
                usage: document.getElementById('modelUsage').value,
                usageLabel: document.getElementById('modelUsage').options[document.getElementById('modelUsage').selectedIndex].text,
                date: document.getElementById('modelDate').value,
                automated: document.getElementById('automatedDecision').checked,
                personalData: document.getElementById('personalData').checked,
                profiling: document.getElementById('profiling').checked,
                thirdParty: document.getElementById('thirdParty').checked,
                notes: document.getElementById('modelNotes').value.trim(),
                addedAt: new Date().toISOString()
            };
            
            // D√©terminer si high-risk
            currentModel.isHighRisk = determineHighRisk(currentModel);
            currentModel.status = currentModel.isHighRisk ? 'high-risk' : 'compliant';
            
            // Ajouter au tableau
            models.push(currentModel);
            localStorage.setItem('euaiact_models', JSON.stringify(models));
            
            // R√©initialiser le formulaire pour le prochain mod√®le
            resetModelForm();
            
            // Passer √† l'√©tape 6
            document.getElementById('step5').classList.remove('active');
            document.getElementById('step6').classList.add('active');
            currentStep = 6;
            updateProgressUI();
            renderSummary();
        }

        function determineHighRisk(model) {
            // Annexe III 5(b) : √©valuation cr√©dit personnes physiques = high-risk
            if (model.usage === 'credit_scoring') return true;
            
            // Profiling automatis√© = toujours high-risk selon Article 6(3)
            if (model.profiling && model.automated) return true;
            
            // Deep Learning + d√©cision automatis√©e = probablement high-risk
            if ((model.type === 'dl' || model.type === 'genai') && model.automated) return true;
            
            return false;
        }

        function resetModelForm() {
            document.getElementById('modelName').value = '';
            document.getElementById('modelType').value = '';
            document.getElementById('modelUsage').value = '';
            document.getElementById('modelDate').value = '';
            document.getElementById('automatedDecision').checked = false;
            document.getElementById('personalData').checked = false;
            document.getElementById('profiling').checked = false;
            document.getElementById('thirdParty').checked = false;
            document.getElementById('modelNotes').value = '';
        }

        function renderSummary() {
            const container = document.getElementById('summaryContent');
            const total = models.length;
            const highRisk = models.filter(m => m.isHighRisk).length;
            const compliant = models.filter(m => !m.isHighRisk).length;
            
            let html = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">${total}</div>
                        <div class="stat-label">Mod√®les inventori√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" style="color: var(--danger);">${highRisk}</div>
                        <div class="stat-label">High-Risk (Annexe III)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" style="color: var(--success);">${compliant}</div>
                        <div class="stat-label">Conformes / Non high-risk</div>
                    </div>
                </div>
                
                <div class="form-card" style="margin-top: 24px;">
                    <h3 style="margin-bottom: 20px; color: var(--primary);">D√©tail des mod√®les analys√©s</h3>
            `;
            
            if (models.length === 0) {
                html += `<p style="color: var(--text-light); text-align: center; padding: 24px;">Aucun mod√®le enregistr√©</p>`;
            } else {
                models.forEach((model, index) => {
                    const badgeClass = model.isHighRisk ? 'badge-high-risk' : 'badge-compliant';
                    const badgeText = model.isHighRisk ? 'High-Risk' : 'Conforme';
                    
                    html += `
                        <div class="model-summary">
                            <div class="model-summary-header">
                                <span class="model-summary-name">${index + 1}. ${escapeHtml(model.name)}</span>
                                <span class="badge ${badgeClass}">${badgeText}</span>
                            </div>
                            <div class="model-summary-meta">
                                ${model.typeLabel} ‚Ä¢ ${model.usageLabel} ‚Ä¢ Mise en production : ${formatDate(model.date)}
                                ${model.thirdParty ? ' ‚Ä¢ Fournisseur tiers' : ''}
                                ${model.automated ? ' ‚Ä¢ D√©cision automatis√©e' : ''}
                            </div>
                        </div>
                    `;
                });
            }
            
            html += `</div>`;
            
            // Ajouter la checklist si des mod√®les high-risk existent
            if (highRisk > 0) {
                html += `
                    <div class="checklist-container">
                        <h3 style="margin-bottom: 20px; color: var(--primary);">Checklist de conformit√© obligatoire (Articles 9-20)</h3>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-risk" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Syst√®me de Risk Management (Article 9)</h4>
                                <p>Mise en place d'un syst√®me de gestion des risques tout au long du cycle de vie du syst√®me d'IA</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-data" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Data Governance (Article 10)</h4>
                                <p>Qualit√©, repr√©sentativit√© et absence de biais dans les jeux de donn√©es d'entra√Ænement, validation et test</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-doc" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Documentation Technique (Article 11)</h4>
                                <p>Documentation compl√®te d√©crivant le syst√®me, ses capacit√©s et limites, conforme √† l'Annexe IV</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-logs" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Record-Keeping (Article 12)</h4>
                                <p>Capacit√© √† enregistrer et conserver les logs des √©v√©nements tout au long du cycle de vie</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-transparency" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Transparence et Information (Article 13)</h4>
                                <p>Le syst√®me est con√ßu pour √™tre suffisamment transparent pour permettre l'interpr√©tation des r√©sultats</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-human" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Supervision Humaine (Article 14)</h4>
                                <p>Mesures de supervision humaine effective, y compris possibilit√© d'intervention et d'override</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-security" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>Exactitude, Robustesse, Cybers√©curit√© (Article 15)</h4>
                                <p>Mesures pour assurer exactitude, robustesse et s√©curit√© du syst√®me</p>
                            </div>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" class="checklist-checkbox" id="chk-conformity" onchange="updateChecklistProgress()">
                            <div class="checklist-content">
                                <h4>√âvaluation de Conformit√© (Article 20)</h4>
                                <p>√âvaluation de conformit√© r√©alis√©e avant d√©ploiement (organisme notifi√© ou auto-√©valuation)</p>
                            </div>
                        </div>
                        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; font-weight: 600;">
                                <span>Progression de la conformit√©</span>
                                <span id="checklistPercent">0%</span>
                            </div>
                            <div style="height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                <div id="checklistProgressBar" style="height: 100%; background: var(--primary); width: 0%; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        function updateChecklistProgress() {
            const checkboxes = document.querySelectorAll('.checklist-checkbox');
            const checked = document.querySelectorAll('.checklist-checkbox:checked');
            const percent = Math.round((checked.length / checkboxes.length) * 100);
            
            document.getElementById('checklistPercent').textContent = `${percent}%`;
            document.getElementById('checklistProgressBar').style.width = `${percent}%`;
        }

        function addAnotherModel() {
            document.getElementById('step6').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            currentStep = 2;
            updateProgressUI();
        }

        // G√©n√©ration PDF Premium avec logo
        async function generateFullPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            
            // Header avec rectangle de couleur
            doc.setFillColor(0, 8, 135);
            doc.rect(0, 0, pageWidth, 35, 'F');
            
            // Titre Homieux Media (en attendant le logo base64)
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(22);
            doc.setFont('helvetica', 'bold');
            doc.text('HOMIEUX MEDIA', 20, 22);
            
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text('Conformit√© EU AI Act - Scoring Cr√©dit High-Risk', 20, 30);
            
            // Titre du rapport
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.text('Rapport de Conformit√© EU AI Act', 20, 55);
            
            doc.setTextColor(100);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'normal');
            doc.text(`G√©n√©r√© le ${new Date().toLocaleDateString('fr-FR')} pour ${userData.company}`, 20, 65);
            
            // Informations entreprise
            let y = 85;
            doc.setFillColor(248, 249, 250);
            doc.rect(20, y - 5, pageWidth - 40, 30, 'F');
            
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('Informations client', 25, y + 5);
            
            doc.setTextColor(50);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text(`Entreprise : ${userData.company}`, 25, y + 15);
            doc.text(`Interlocuteur : ${userData.position}`, 25, y + 22);
            
            // Statistiques
            y = 130;
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Synth√®se de l\'inventaire', 20, y);
            
            y += 15;
            const total = models.length;
            const highRisk = models.filter(m => m.isHighRisk).length;
            const compliant = models.filter(m => !m.isHighRisk).length;
            
            // Box stats
            doc.setDrawColor(0, 8, 135);
            doc.setLineWidth(0.5);
            doc.rect(20, y, 50, 25);
            doc.rect(75, y, 50, 25);
            doc.rect(130, y, 50, 25);
            
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.text(total.toString(), 45, y + 12, { align: 'center' });
            doc.text(highRisk.toString(), 100, y + 12, { align: 'center' });
            doc.text(compliant.toString(), 155, y + 12, { align: 'center' });
            
            doc.setTextColor(100);
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.text('Total mod√®les', 45, y + 20, { align: 'center' });
            doc.text('High-Risk', 100, y + 20, { align: 'center' });
            doc.text('Conformes', 155, y + 20, { align: 'center' });
            
            // D√©tail des mod√®les
            y += 45;
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('D√©tail des syst√®mes d\'IA inventori√©s', 20, y);
            
            y += 10;
            models.forEach((model, index) => {
                if (y > 260) {
                    doc.addPage();
                    y = 20;
                }
                
                const statusColor = model.isHighRisk ? [239, 68, 68] : [16, 185, 129];
                const statusText = model.isHighRisk ? 'HIGH-RISK' : 'CONFORME';
                
                doc.setFillColor(statusColor[0], statusColor[1], statusColor[2]);
                doc.rect(20, y, 3, 25, 'F');
                
                doc.setTextColor(0, 8, 135);
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.text(`${index + 1}. ${model.name}`, 28, y + 6);
                
                doc.setTextColor(100);
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.text(`Type : ${model.typeLabel}`, 28, y + 12);
                doc.text(`Usage : ${model.usageLabel}`, 28, y + 17);
                doc.text(`Date : ${formatDate(model.date)}`, 28, y + 22);
                
                doc.setTextColor(statusColor[0], statusColor[1], statusColor[2]);
                doc.setFontSize(8);
                doc.setFont('helvetica', 'bold');
                doc.text(statusText, pageWidth - 30, y + 6, { align: 'right' });
                
                y += 32;
            });
            
            // Footer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setTextColor(150);
                doc.setFontSize(8);
                doc.setFont('helvetica', 'normal');
                doc.text(`Document confidentiel - ${userData.company} - Page ${i}/${pageCount}`, pageWidth / 2, 290, { align: 'center' });
                doc.text('¬© 2026 Homieux Media - Suite EU AI Act pour Banques', pageWidth / 2, 295, { align: 'center' });
            }
            
            doc.save(`rapport-conformite-eu-ai-act-${userData.company.replace(/\s+/g, '-').toLowerCase()}-${new Date().toISOString().split('T')[0]}.pdf`);
        }

        function generateChecklistPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            
            // Header
            doc.setFillColor(0, 8, 135);
            doc.rect(0, 0, pageWidth, 30, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.text('HOMIEUX MEDIA', 20, 18);
            
            // Titre
            doc.setTextColor(0, 8, 135);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.text('Checklist de Conformit√© EU AI Act', 20, 45);
            
            doc.setTextColor(100);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text(`Pour : ${userData.company} - ${userData.position}`, 20, 55);
            doc.text(`Date : ${new Date().toLocaleDateString('fr-FR')}`, 20, 62);
            
            const checklistItems = [
                { art: 'Article 9', title: 'Syst√®me de Risk Management', desc: 'Mise en place d\'un syst√®me de gestion des risques tout au long du cycle de vie' },
                { art: 'Article 10', title: 'Data Governance', desc: 'Qualit√©, repr√©sentativit√© et absence de biais des jeux de donn√©es' },
                { art: 'Article 11', title: 'Documentation Technique', desc: 'Documentation compl√®te conforme √† l\'Annexe IV' },
                { art: 'Article 12', title: 'Record-Keeping', desc: 'Enregistrement et conservation des logs op√©rationnels' },
                { art: 'Article 13', title: 'Transparence', desc: 'Transparence suffisante pour l\'interpr√©tation des r√©sultats' },
                { art: 'Article 14', title: 'Supervision Humaine', desc: 'Supervision humaine effective et possibilit√© d\'intervention' },
                { art: 'Article 15', title: 'Exactitude et S√©curit√©', desc: 'Exactitude, robustesse et s√©curit√© du syst√®me' },
                { art: 'Article 20', title: '√âvaluation de Conformit√©', desc: '√âvaluation r√©alis√©e avant d√©ploiement' }
            ];
            
            let y = 75;
            checklistItems.forEach((item, index) => {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                
                // Checkbox vide
                doc.setDrawColor(0, 8, 135);
                doc.setLineWidth(0.5);
                doc.rect(20, y, 5, 5);
                
                doc.setTextColor(0, 8, 135);
                doc.setFontSize(10);
                doc.setFont('helvetica', 'bold');
                doc.text(`${item.title} (${item.art})`, 32, y + 4);
                
                doc.setTextColor(80);
                doc.setFontSize(8);
                doc.setFont('helvetica', 'normal');
                doc.text(item.desc, 32, y + 10);
                
                y += 22;
            });
            
            // Date limite
            y += 5;
            doc.setFillColor(254, 243, 199);
            doc.rect(20, y, pageWidth - 40, 15, 'F');
            doc.setTextColor(146, 64, 14);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('Date limite de conformit√© : 2 ao√ªt 2026', 25, y + 6);
            doc.setFont('helvetica', 'normal');
            doc.text('Sanctions : jusqu\'√† 15M‚Ç¨ ou 3% du CA mondial', 25, y + 12);
            
            // Footer
            doc.setTextColor(150);
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.text('¬© 2026 Homieux Media - Tous droits r√©serv√©s', pageWidth / 2, 290, { align: 'center' });
            
            doc.save(`checklist-conformite-eu-ai-act-${new Date().toISOString().split('T')[0]}.pdf`);
        }

        // Soumission vers Google Forms - VERSION CORRIG√âE
function submitToTracking() {
    const total = models.length;
    const highRisk = models.filter(m => m.isHighRisk).length;
    
    console.log('Envoi des donn√©es...'); // Debug
    console.log('Form ID:', GOOGLE_FORM_CONFIG.formId);
    console.log('Entry IDs:', GOOGLE_FORM_CONFIG.entryIds);
    
    // Construire l'URL SANS espace parasite
    const formUrl = `https://docs.google.com/forms/d/e/${GOOGLE_FORM_CONFIG.formId}/formResponse`;
    
    console.log('URL compl√®te:', formUrl); // Debug - v√©rifie dans la console (F12)
    
    // Pr√©parer les donn√©es avec URLSearchParams (plus fiable que FormData)
    const params = new URLSearchParams();
    params.append(GOOGLE_FORM_CONFIG.entryIds.company, userData.company);
    params.append(GOOGLE_FORM_CONFIG.entryIds.position, userData.position);
    params.append(GOOGLE_FORM_CONFIG.entryIds.timestamp, new Date().toLocaleString('fr-FR'));
    params.append(GOOGLE_FORM_CONFIG.entryIds.totalModels, total);
    params.append(GOOGLE_FORM_CONFIG.entryIds.highRiskCount, highRisk);
    params.append(GOOGLE_FORM_CONFIG.entryIds.jsonData, JSON.stringify({
        user: userData,
        models: models,
        summary: { total, highRisk, compliant: total - highRisk }
    }, null, 2));
    
    // Envoyer avec mode no-cors (obligatoire pour Google Forms)
    fetch(formUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: params.toString(),
        mode: 'no-cors'
    }).then(() => {
        console.log('Succ√®s !');
        alert('‚úÖ Donn√©es envoy√©es avec succ√®s !\n\nV√©rifiez votre Google Forms dans quelques secondes.');
    }).catch((error) => {
        console.error('Erreur:', error);
        alert('‚ùå Erreur r√©seau. D√©tails dans la console (F12).');
    });
}

        // Utilitaires
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateString) {
            if (!dateString) return 'Non sp√©cifi√©e';
            return new Date(dateString).toLocaleDateString('fr-FR');
        }
    </script>
</body>
</html>
